<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to use the Core &#8212; Entando Documentation 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Entando Documentation 1.0 documentation" href="../index.html" />
    <link rel="up" title="V4.3.1" href="index.html" />
    <link rel="next" title="Technical Specifications" href="Technical-Specifications.html" />
    <link rel="prev" title="How the Core works" href="How-the-Core-works.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Technical-Specifications.html" title="Technical Specifications"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="How-the-Core-works.html" title="How the Core works"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Entando Documentation 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../versions.html" >Entando Versions</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">V4.3.1</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-use-the-core">
<h1>How to use the Core<a class="headerlink" href="#how-to-use-the-core" title="Permalink to this headline">¶</a></h1>
<p id="index-0">The Entando framework core is based on three main components:
<code class="docutils literal"><span class="pre">entando-engine</span></code>, <code class="docutils literal"><span class="pre">entando</span> <span class="pre">admin-console</span></code>, <code class="docutils literal"><span class="pre">entando</span> <span class="pre">portal-ui</span></code>.</p>
<p>They are essential elements of the framework since provide the useful
functionality to realize customized services.</p>
<p>Their high-level description and the interaction process is summarized
in the <a class="reference external" href="https://github.com/entando/entando-core/wiki/How-It-Works">How It
Works</a>
page. More specifically, it shows how the <em>admin-console</em> component
interacts with the <em>engine</em> component to expose various services and how
the <em>portal-ui</em> interacts with <em>admin-console</em> and <em>engine</em> in order to
provide the requested services to the final users.</p>
<p>In this page the procedure for using the three components useful to
create a web application is described:</p>
<ul class="simple">
<li>How to use the main services exposed by the <em>engine</em> component;</li>
<li>How to sue the main functionality provided by the <em>admin-console</em>
component in order to create back-office interfaces;</li>
<li>How to use the main functionality and tools provided by the
<em>portal-ui</em> component to create the basic elements for front-end
interfaces.</li>
</ul>
<hr class="docutils" id="index-1" />
<div class="section" id="entando-engine">
<h2>entando-engine<a class="headerlink" href="#entando-engine" title="Permalink to this headline">¶</a></h2>
<p>It is imported as dependency from the archetype and exposes services
which are accessed in two ways:</p>
<p><strong>1) Spring Dependency Injection</strong></p>
<p>Configuring the xml of the bean we are creating in order to use the
entando-engine services</p>
<div class="code xml highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
        xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;
        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
                http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd&quot; &gt;

    &lt;bean id=&quot;myBean&quot; class=&quot;com.my.package.Class” parent=&quot;abstractService&quot;&gt;
        &lt;property name=&quot;userProfileManager&quot; ref=&quot;UserProfileManager&quot; /&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</pre></div>
</div>
<p>For further details on how to use the dependency injection see the
<a class="reference external" href="http://docs.spring.io/spring/docs/4.0.6.RELEASE/spring-framework-reference/html/">Spring documentation
website</a>.</p>
<p><strong>2) Application Context</strong></p>
<p>Access the bean of the manager using <code class="docutils literal"><span class="pre">ApsWebApplicationUtils.getBean</span></code></p>
<div class="code java highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.agiletec.aps.util.ApsWebApplicationUtils</span><span class="p">;</span>

<span class="o">//...</span>

<span class="n">IAuthorizationManager</span> <span class="n">entandoAuthManager</span> <span class="o">=</span> <span class="p">(</span><span class="n">IAuthorizationManager</span><span class="p">)</span> <span class="n">ApsWebApplicationUtils</span><span class="o">.</span><span class="n">getBean</span><span class="p">(</span><span class="n">SystemConstants</span><span class="o">.</span><span class="n">AUTHORIZATION_SERVICE</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">pageContext</span><span class="p">);</span>

<span class="o">//</span><span class="n">do</span> <span class="n">something</span> <span class="k">with</span> <span class="n">entandoAuthManager</span><span class="o">...</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="entando-admin-console">
<h2>Entando admin-console<a class="headerlink" href="#entando-admin-console" title="Permalink to this headline">¶</a></h2>
<p>The developer will use the services exposed from the entando
admin-console for managing objects and data for the web application&#8217;s
administrators (back-office)</p>
<ul class="simple">
<li>struts2 infrastructure (interceptors stack, helpers, base actions…)</li>
<li>back-office templating system</li>
<li>front-end templating system</li>
<li>back-office tag libraries</li>
<li>activity stream</li>
<li>back-office user shortcuts</li>
</ul>
<p>Entando admin-console provides all those functionalities needed to
manage the applications (widgets, page models and pages) which portal-ui
component will use, keep reading the Entando portal-ui.</p>
</div>
<hr class="docutils" />
<div class="section" id="entando-portal-ui">
<h2>Entando portal-ui<a class="headerlink" href="#entando-portal-ui" title="Permalink to this headline">¶</a></h2>
<p>It provides the tools needed to create the front-end part of the web
application. The three main elements are:</p>
<ul class="simple">
<li>Page</li>
<li>Widget</li>
<li>Content</li>
</ul>
<div class="section" id="pages">
<h3>Pages<a class="headerlink" href="#pages" title="Permalink to this headline">¶</a></h3>
<p>Users access the web application through the Entando Pages which are
organized in a tree. Portal-ui gives the tools to create, edit and
delete the pages and the page tree.</p>
<p>Pages are created using models. Page Models define the structure of the
page and tell the system what are the configurable slot available for
that page and provide also a template for the GUI Page Models can be
managed drom the back-office.</p>
<p>Example of a Page Tree:</p>
<ul class="simple">
<li>Home (Page Model Two Columns)<ul>
<li>About Us (Page Model Two Columns)<ul>
<li>Contact Us (Page Model Three Columns Green)</li>
</ul>
</li>
<li>Buy (Page Model Two Columns)</li>
</ul>
</li>
<li>Pricing (Page Model Three Columns Green)<ul>
<li>Shipment (Page Model Three Columns Red)</li>
</ul>
</li>
</ul>
<p>Page Models Xml The xml describes what configurable slots will be
supported by the page Example of an XML:</p>
<div class="code js highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;frames&gt;
    &lt;frame pos=&quot;0&quot;&gt;
        &lt;descr&gt;Header&lt;/descr&gt;
    &lt;/frame&gt;
    &lt;frame pos=&quot;1&quot;&gt;
        &lt;descr&gt;Body&lt;/descr&gt;
    &lt;/frame&gt;
    &lt;frame pos=&quot;2&quot;&gt;
        &lt;descr&gt;Footer&lt;/descr&gt;
    &lt;/frame&gt;
&lt;/frames&gt;
</pre></div>
</div>
<p>There will be possible to add any number of &lt;frame&gt; elements with the
only constraint that the pos attributes are numbered correctly. The
&lt;descr&gt; element contains the description visible in the back-office, it
will show up to the administrator when performing actions with the
pages.</p>
<p>Page Models Template They are the template UI of the page and it’s
written in Freemarker language and with the Entando front-end tag
library will be possible to recall the positions content.</p>
<p>Here a template example working with the previous example xml:</p>
<div class="code html highlight-default"><div class="highlight"><pre><span></span>&lt;#assign wp=JspTaglibs[&quot;/aps-core&quot;]&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;&lt;@wp.info key=”currentLang” /&gt;&quot;&gt;
    &lt;head&gt;
        &lt;title&gt;&lt;@wp.currentPage param=&quot;title&quot; /&gt;&lt;/title&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;@wp.cssUrl /&gt;pagemodes/mycss.css&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;header&quot;&gt;&lt;@wp.show frame=&quot;0&quot; /&gt;&lt;/div&gt;
        &lt;div id=&quot;body&quot;&gt;&lt;@wp.show frame=&quot;1&quot; /&gt;&lt;/div&gt;
        &lt;div id=&quot;footer&quot;&gt;&lt;@wp.show frame=&quot;2&quot; /&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
<div class="section" id="widgets">
<h3>Widgets<a class="headerlink" href="#widgets" title="Permalink to this headline">¶</a></h3>
<p>Widgets are the bricks that make up the web application. Since version
4.2 is possible to create new widget from the web back-office.</p>
<p>Developers should know in order to add new widget that a new record in
the widgetcatalog table of the port database must be created.</p>
<div class="code sql highlight-default"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">widgetcatalog</span> <span class="p">(</span> <span class="n">code</span><span class="p">,</span><span class="n">titles</span><span class="p">,</span><span class="n">parameters</span><span class="p">,</span><span class="n">plugincode</span><span class="p">,</span><span class="n">parenttypecode</span><span class="p">,</span><span class="n">defaultconfig</span><span class="p">,</span><span class="n">locked</span><span class="p">,</span><span class="n">maingroup</span> <span class="p">)</span>
<span class="n">VALUES</span> <span class="p">(</span>
    <span class="s1">&#39;mywidget&#39;</span><span class="p">,</span>
    <span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
            <span class="o">&lt;</span><span class="n">properties</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">property</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="o">&gt;</span><span class="n">System</span> <span class="n">Messages</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">property</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;it&quot;</span><span class="o">&gt;</span><span class="n">Messaggi</span> <span class="n">di</span> <span class="n">Sistema</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">properties</span><span class="o">&gt;</span><span class="s1">&#39;,</span>
    <span class="s1">&#39;&lt;config&gt;</span>
        <span class="o">&lt;</span><span class="n">parameter</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;myParamName&quot;</span><span class="o">&gt;</span>
            <span class="n">My</span> <span class="n">Param</span> <span class="n">Description</span>
        <span class="o">&lt;/</span><span class="n">parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">action</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;configSimpleParameter&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">config</span><span class="o">&gt;</span><span class="s1">&#39;,</span>
    <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="n">NULL</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NULL</span><span class="p">);</span>
</pre></div>
</div>
<p>Since version 4.2 widgets are rendered using the <em>Entando Fragments</em>,
which are a piece of Freemarker template giving html as output, html
that will be concatenated in Pages. This means that for every widget
there is a Fragment making its GUI.</p>
<p>These Entando Fragments can be managed form the back-office. Here an
example of the gui code for a widget returning the value of a parameter:</p>
<div class="code html+velocity highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="c1">#assign wp=JspTaglibs[&quot;/aps-core&quot;]&gt;</span>
<span class="n">Stored</span> <span class="n">value</span> <span class="k">for</span> <span class="n">myParamName</span> <span class="ow">is</span><span class="p">:</span> <span class="o">&lt;</span><span class="nd">@wp</span><span class="o">.</span><span class="n">currentWidget</span> <span class="n">param</span><span class="o">=</span><span class="s2">&quot;config&quot;</span> <span class="n">configParam</span><span class="o">=</span><span class="s2">&quot;myParamName&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="contents">
<h3>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h3>
<p>Within the default distribution of Entando <em>portal-ui</em> is embedded the
CMS plugin, it allows the management of the contents.</p>
<p>From the back-office is possible to manage the content archive and with
dedicated widgets is possible to publish lists or single contents.</p>
<p>Content from the CMS are grouped by Content Types. Think of each Content
Type as the proprotype describing the content structure. For instance,
the application can have the Content Type News, Announcement, Event,
Contact… according to the needs more Content Types, this allows to:</p>
<ul class="simple">
<li>content archive cataloged homogeneously</li>
<li>easier editing because every field is strictly related to that type</li>
<li>ui customization with specific templates for each type</li>
</ul>
<p>More in detail, Content Types structure the contents using basic data
type such as texts, numbers, hypertexts, dates and few others.</p>
<p>Example, Content Type News:</p>
<ul class="simple">
<li><em>Title</em> -&gt; multilingual text</li>
<li><em>Publication Date</em> -&gt; date</li>
<li><em>Subtitle</em> -&gt; multilingual long text</li>
<li><em>Body</em> -&gt; multilingual hypertext</li>
<li><em>Main Picture</em> -&gt; image</li>
<li><em>Secondary Picture</em> -&gt; image</li>
</ul>
<p>With a so defined structure will be easy to introduce the validation
check (mandatory fields, length) needed and also will be possible to
publish widget with automatic generated lists filtering and sorting
using those attributes (i.e. sort by title ascending, then date
descending and with date greater than today…).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_entando.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to use the Core</a><ul>
<li><a class="reference internal" href="#entando-engine">entando-engine</a></li>
<li><a class="reference internal" href="#entando-admin-console">Entando admin-console</a></li>
<li><a class="reference internal" href="#entando-portal-ui">Entando portal-ui</a><ul>
<li><a class="reference internal" href="#pages">Pages</a></li>
<li><a class="reference internal" href="#widgets">Widgets</a></li>
<li><a class="reference internal" href="#contents">Contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="How-the-Core-works.html"
                        title="previous chapter">How the Core works</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Technical-Specifications.html"
                        title="next chapter">Technical Specifications</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/v431/How-to-use-the-Core.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Technical-Specifications.html" title="Technical Specifications"
             >next</a> |</li>
        <li class="right" >
          <a href="How-the-Core-works.html" title="How the Core works"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Entando Documentation 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../versions.html" >Entando Versions</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >V4.3.1</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Simone Sanna.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>