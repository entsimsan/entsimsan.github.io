<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Server Installation &#8212; Entando 4.3.x documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.3.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Entando 4.3.x documentation" href="../index.html" />
    <link rel="up" title="V4.3.1" href="index.html" />
    <link rel="next" title="How the Core works" href="How-the-Core-works.html" />
    <link rel="prev" title="Build From Source Code" href="Build-from-source-code.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="How-the-Core-works.html" title="How the Core works"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Build-from-source-code.html" title="Build From Source Code"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Entando 4.3.x documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../versions.html" >Entando Versions</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">V4.3.1</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server-installation">
<h1>Server Installation<a class="headerlink" href="#server-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hardware-requirements">
<span id="index-0"></span><h2>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h2>
<p>The installation of an Entando web application does not need heavy
requirements of CPU and memory, however depending on the project
configuration, the <em>development</em> environment could need heavy CPU and
memory usage.</p>
<p>A tipical production server:</p>
<ul class="simple">
<li>4 GB di RAM (or more depending on the traffic and users)</li>
<li>Intel(R) Xeon(R) CPU E5-2680 v2 &#64; 2.80GHz</li>
<li>1 GB of free disk space</li>
</ul>
<p>The previous hardware configuration has been used in many projects. The
disk space is used mainly by the <em>Maven</em> dependencies while the
installation phase, when in production the occupied space depends of the
loaded resources (documents, images, files, etc).</p>
</div>
<div class="section" id="software-requirements">
<span id="index-1"></span><h2>Software Requirements<a class="headerlink" href="#software-requirements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="application-server">
<h3>Application Server<a class="headerlink" href="#application-server" title="Permalink to this headline">¶</a></h3>
<p>The following software requirements are needed to compile and run
Entando in a server</p>
<ul class="simple">
<li>Oracle JDK 1.7+ (<a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle
website</a>)</li>
<li>Apache Maven 3+ (<a class="reference external" href="http://maven.apache.org/download.cgi">Maven
website</a>)</li>
<li>Apache Ant 1.8.x + (<a class="reference external" href="http://ant.apache.org/bindownload.cgi">Ant
website</a>)</li>
<li>Apache Tomcat 6.x + <em>or</em> 7.x+ (<a class="reference external" href="http://tomcat.apache.org/download-70.cgi">Tomcat
website</a>)</li>
<li>JDBC Driver for Tomcat (depending on the DBMS)</li>
</ul>
</div>
<div class="section" id="web-server">
<span id="index-2"></span><h3>Web Server<a class="headerlink" href="#web-server" title="Permalink to this headline">¶</a></h3>
<p>Needed to serve the static resources and relieve the Tomcat&#8217;s load. *
Apache 2.2 (<a class="reference external" href="http://httpd.apache.org/download.cgi">Apache website</a>)</p>
</div>
<div class="section" id="database">
<span id="index-3"></span><h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<p>Entando is ready to run with these DBMS, install accordingly the setup
of your web application:</p>
<ul class="simple">
<li>PostgreSQL 8.4+ (<a class="reference external" href="http://www.postgresql.org/download/">PostgreSQL
website</a>)</li>
<li>MySQL Community Server 5.6+ (<a class="reference external" href="http://dev.mysql.com/downloads/mysql/">Community download
page</a>)</li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="entando-in-production-prepare-the-server">
<span id="index-4"></span><h2>Entando in Production, prepare the server<a class="headerlink" href="#entando-in-production-prepare-the-server" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-tomcat">
<h3>Install Tomcat<a class="headerlink" href="#install-tomcat" title="Permalink to this headline">¶</a></h3>
<p>Get the installer from the <a class="reference external" href="http://tomcat.apache.org/download-70.cgi">Tomcat
homepage</a> or check if your
system package manager provide a preconfigured Tomcat.</p>
</div>
<div class="section" id="configure-the-trimspaces-tomcat-directive">
<h3>Configure the <code class="docutils literal"><span class="pre">trimSpaces</span></code> Tomcat directive<a class="headerlink" href="#configure-the-trimspaces-tomcat-directive" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal"><span class="pre">&lt;TOMCAT_HOME&gt;\con\web.xml</span></code> file and add the
<code class="docutils literal"><span class="pre">init-param</span></code>element into the jsp servlet configuration:</p>
<div class="code xml highlight-default"><div class="highlight"><pre><span></span>&lt;web-app ...&gt;
    ...
    &lt;servlet&gt;
        &lt;servlet-name&gt;jsp&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.jasper.servlet.JspServlet&lt;/servlet-class&gt;
        ...
        &lt;!-- copy from here... --&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;trimSpaces&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;!-- ...to here --&gt;
        ...
    &lt;/servlet&gt;
    ...
&lt;/web-app&gt;
</pre></div>
</div>
<p><strong>Tip</strong>: just find the keyword <code class="docutils literal"><span class="pre">trimSpaces</span></code> and you will find exactly
where to place the init-param element</p>
</div>
<div class="section" id="install-the-jdbc-driver">
<span id="index-5"></span><h3>Install the JDBC driver<a class="headerlink" href="#install-the-jdbc-driver" title="Permalink to this headline">¶</a></h3>
<p>Download the JDBC driver and copy it into the <code class="docutils literal"><span class="pre">&lt;TOMCAT_HOME&gt;\libs</span></code>
folder.</p>
<p><em>Remeber</em>: the JDBC driver is a file with jar extension. If needed
unpack the downloaded file and locate the proper jar file.</p>
<ul class="simple">
<li><a class="reference external" href="http://jdbc.postgresql.org/download/postgresql-9.3-1102.jdbc3.jar">PostgreSQL
JDBC</a></li>
<li><a class="reference external" href="http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.34.zip">MySQL
JDBC</a></li>
<li><a class="reference external" href="http://it.apache.contactlab.it/db/derby/db-derby-10.11.1.1/db-derby-10.11.1.1-bin.zip">Derby
JDBC</a></li>
</ul>
</div>
<div class="section" id="install-apache2-httpd">
<span id="index-6"></span><h3>Install Apache2 httpd<a class="headerlink" href="#install-apache2-httpd" title="Permalink to this headline">¶</a></h3>
<p>Download Apache2 httpd for the webserver installation</p>
<ul class="simple">
<li>Windows: get
<a class="reference external" href="http://archive.apache.org/dist/httpd/binaries/win32/apache_2.2.9-win32-x86-openssl-0.9.8h-r2.msi">apache_2.2.9-win32-x86-openssl-0.9.8h-r2.msi</a></li>
<li>Ubuntu: <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">--yes</span> <span class="pre">apache2</span></code></li>
<li>Other systems: check if your system package manager provide a
preconfigured Apache2 version 2.2 or check the <a class="reference external" href="http://httpd.apache.org/download.cgi">Apache Http Server
page</a></li>
</ul>
</div>
<div class="section" id="tomcat-connectors-mod-jk">
<h3>Tomcat Connectors <code class="docutils literal"><span class="pre">mod_jk</span></code><a class="headerlink" href="#tomcat-connectors-mod-jk" title="Permalink to this headline">¶</a></h3>
<p>Install and configure the <code class="docutils literal"><span class="pre">mod_jk</span></code> in order to work with Apache and
Tomcat</p>
<ul class="simple">
<li><strong>Windows</strong>: <a class="reference external" href="http://www.apache.org/dist/tomcat/tomcat-connectors/jk/binaries/windows/tomcat-connectors-1.2.40-windows-x86_64-httpd-2.4.x.zip">download version
1.2.40</a>
and copy the mod-jk file into <code class="docutils literal"><span class="pre">apachedir\modules\</span></code> folder</li>
<li><strong>Ubuntu</strong>: <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libapache2-mod-jk</span></code></li>
<li><strong>Other systems</strong>: check if your system package manager provide a
preconfigured package or check the official <a class="reference external" href="http://tomcat.apache.org/connectors-doc/">Apache Tomcat Connector
page</a>.</li>
</ul>
<p>Setup <code class="docutils literal"><span class="pre">mod-jk</span></code> editing the <code class="docutils literal"><span class="pre">apachedir\conf\workers.properties</span></code> file,
usually it should contain something similar to:</p>
<div class="code ini highlight-default"><div class="highlight"><pre><span></span><span class="n">worker</span><span class="o">.</span><span class="n">list</span><span class="o">=</span><span class="n">ajp13</span>
<span class="n">worker</span><span class="o">.</span><span class="n">myworker</span><span class="o">.</span><span class="n">type</span><span class="o">=</span><span class="n">ajp13</span>
<span class="n">worker</span><span class="o">.</span><span class="n">myworker</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">worker</span><span class="o">.</span><span class="n">myworker</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">8009</span>
</pre></div>
</div>
</div>
<div class="section" id="tomcat-uri-encoding">
<h3>Tomcat URI Encoding<a class="headerlink" href="#tomcat-uri-encoding" title="Permalink to this headline">¶</a></h3>
<p>Setup the URI Encoding for Tomcat, it allows to process the querystrings
with the UTF-8 encoding.</p>
<p>Edit the file `<code class="docutils literal"><span class="pre">&lt;TOMCAT_HOME&gt;/conf/server.xml</span></code>, add the
URIEncoding=&#8221;UTF-8&#8221; attribute to the Connector with port 8080. See The
example</p>
<div class="code xml highlight-default"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">&lt;</span><span class="n">Server</span> <span class="o">...&gt;</span>
    <span class="o">...</span>
    <span class="o">&lt;</span><span class="n">Service</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Catalina&quot;</span><span class="o">&gt;</span>
        <span class="o">...</span>

        <span class="o">&lt;</span><span class="n">Connector</span> <span class="n">port</span><span class="o">=</span><span class="s2">&quot;8080&quot;</span> <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;HTTP/1.1&quot;</span>
            <span class="n">connectionTimeout</span><span class="o">=</span><span class="s2">&quot;20000&quot;</span>
            <span class="n">redirectPort</span><span class="o">=</span><span class="s2">&quot;8443&quot;</span>
            <span class="n">URIEncoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span>
        <span class="o">/&gt;</span>

        <span class="o">...</span>
    <span class="o">&lt;/</span><span class="n">Service</span><span class="o">&gt;</span>
    <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">Server</span><span class="o">&gt;</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="apache-virtualhost">
<h3>Apache VirtualHost<a class="headerlink" href="#apache-virtualhost" title="Permalink to this headline">¶</a></h3>
<p>Configure a <em>virtual host</em> adapting the pathes for your system.</p>
<p>Remember to change the ``APPNAME``` string with the name of your
actual webapp.</p>
<div class="code apache highlight-default"><div class="highlight"><pre><span></span>&lt;VirtualHost FQDN:80&gt;
    ServerName FQDN
    DocumentRoot /var/www/FQDN

    ErrorLog /var/log/apache2/FQDN_error.log
    LogLevel warn
    CustomLog /var/log/apache2/FQDN_access.log combined

    # Use SetEnvIf to st no-jk when /home/ is encountered
    SetEnvIf Request_URI &quot;/APPNAME/resources/cms/*&quot; no-jk
    SetEnvIf Request_URI &quot;/APPNAME/resources/plugins/*&quot; no-jk

    Alias /APPNAME/resources/cms /var/lib/tomcat6/webapps/APPNAME/resources/cms
    Alias /APPNAME/resources/plugins /var/lib/tomcat6/webapps/APPNAME/resources/plugins

    &lt;Directory &quot;/var/lib/tomcat6/webapps/APPNAME/resources/cms&quot;&gt;
        Options -Indexes
        AllowOverride None
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;

    &lt;Directory &quot;/var/lib/tomcat6/webapps/APPNAME/resources/plugins&quot;&gt;
        Options -Indexes
        AllowOverride None
        Order allow,deny
        Allow from all
    &lt;/Directory&gt;

    JkMount /APPNAME/* ajp13_worker
    RedirectMatch ^/$ /APPNAME/
&lt;/VirtualHost&gt;
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_entando.svg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Server Installation</a><ul>
<li><a class="reference internal" href="#hardware-requirements">Hardware Requirements</a></li>
<li><a class="reference internal" href="#software-requirements">Software Requirements</a><ul>
<li><a class="reference internal" href="#application-server">Application Server</a></li>
<li><a class="reference internal" href="#web-server">Web Server</a></li>
<li><a class="reference internal" href="#database">Database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#entando-in-production-prepare-the-server">Entando in Production, prepare the server</a><ul>
<li><a class="reference internal" href="#install-tomcat">Install Tomcat</a></li>
<li><a class="reference internal" href="#configure-the-trimspaces-tomcat-directive">Configure the <code class="docutils literal"><span class="pre">trimSpaces</span></code> Tomcat directive</a></li>
<li><a class="reference internal" href="#install-the-jdbc-driver">Install the JDBC driver</a></li>
<li><a class="reference internal" href="#install-apache2-httpd">Install Apache2 httpd</a></li>
<li><a class="reference internal" href="#tomcat-connectors-mod-jk">Tomcat Connectors <code class="docutils literal"><span class="pre">mod_jk</span></code></a></li>
<li><a class="reference internal" href="#tomcat-uri-encoding">Tomcat URI Encoding</a></li>
<li><a class="reference internal" href="#apache-virtualhost">Apache VirtualHost</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Build-from-source-code.html"
                        title="previous chapter">Build From Source Code</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="How-the-Core-works.html"
                        title="next chapter">How the Core works</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/v431/Server-Installation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="How-the-Core-works.html" title="How the Core works"
             >next</a> |</li>
        <li class="right" >
          <a href="Build-from-source-code.html" title="Build From Source Code"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Entando 4.3.x documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../versions.html" >Entando Versions</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >V4.3.1</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Simone Sanna.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>